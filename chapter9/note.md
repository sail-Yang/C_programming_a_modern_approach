##  函数定义和调用的一些规则

###  函数定义

我们先放一个求平均值的小函数：

```c
double average(double a,double b){
    return (a+b)/2;
}
```

其实这个函数就反映了函数的结构;

```
返回类型 函数名（形式参数）
{
	声明
	语句
}
```

- 返回类型：不能返回数组，但没有其它限制；返回类型为void的函数没有返回值。

  ​				 当返回类型比较长的时候可以像下面这样写：

  ```c
  unsigned long int
  averge(double a,double b){
  	return (a+b)/2
  }
  ```

- 声明和语句：函数体内声明的变量只能专属此函数，其它函数不能对这些变量进行检查和修改。

  ​					对于返回类型为void的函数，语句可以为空→**留一个函数，预留空间，下次再写。**

###  函数调用

可丢弃返回值也可不丢。

##  函数声明

###  如何解决不可避免地把定义放到函数调用之后

首先要明白把定义放到函数调用之后会怎么样？

当main函数遇到第一个函数f()调用时，编译器无关于f()的信息→不知道f()有多少形式参数、形参的类型是啥、f()的返回值是什么；但是并不会给出错误信息，而是假设f()返回Int，这个时候其实编译器进行了**隐式声明**：编译器进行默认的*实际参数提升*（后面解释道）并期待最好结果发生；当编译器再后面遇到f()的定义时，它会发现函数的返回类型实际上是double而不是Int，从而我们得出错误信息。

---

为了解决上面这个问题，最简单的方法就是把定义放到调用前，但实际上有可能不允许这么做。C语言提供了一种更好的方法：**在调用前声明每个函数。**

- 函数声明

  函数声明使得编译器可以先对函数进行概要浏览，而函数的完整性以后再给出；函数声明类似于函数定义的第一行，不同之处在于其结尾处有个分号。

  > 返回类型 函数名（形参）；

---

总之，C99遵循：在调用一个函数之前，必须先对其进行声明或定义。调用函数时，如果此前没有该函数的声明或定义，对导致出错。



##  实际参数

###  实参和形参的差别

实参出现在函数调用时的表达式里；而形参出现在函数定义中的表达式里。

在C语言中，**实参是通过值传递的**：在调用函数时，计算出每个实际参数的值并且把它赋值给相应的形式参数。

在函数执行过程中，**对形式参数的改变不会影响实际参数的值**，这是因为**形式参数包含的是实际参数值的副本**。

####  实参按值传递的利与弊

利：既然形参不会对实参造成影响，那么我们可以用main里的函数变量用作实参，省掉了真正需要的变量的数量。

弊：C语言关于实际参数按值传递的要求使它很难编写某些类型的函数，比如说下面这个：		

```c
/*把double类型的值分成整数和小数部分，因为函数无法返回两个变量，可以尝试把两个变量传递给函数并修改它们*/
void decompose(double x,long int_part,double frac_part)
{
    int_part = (long) x,;/*drops the fractional part of x*/
    frac_part = x - int_part;
}
int main(){
    decompose(3.141592,i,d)
}
```

这个函数中，变量i和d不会因为赋值给Int_part和frac_part而受到影响，所以它们在函数调用前后的值完全一样。这个问题的解决方法会在11.4节公布。

